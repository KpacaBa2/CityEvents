{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "Мои события — CityEvents" %}{% endblock %}

{% block content %}
{% trans "Мои события" as brad_title %}
{% trans "Главная / Мои события" as brad_subtitle %}
{% include 'partials/bradcam.html' with title=brad_title subtitle=brad_subtitle %}

<div class="job_listing_area plus_padding">
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <div class="job_filter white-bg">
                    <div class="form_inner white-bg">
                        <h3>{% trans "Фильтр" %}</h3>
                        <form class="filter-bar" method="get">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="single_field">
                                        <input type="text" name="q" placeholder="{% trans 'Поиск' %}" value="{{ request.GET.q }}" data-filter-input>
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <div class="single_field">
                                        <input type="text" name="city" placeholder="{% trans 'Город' %}" value="{{ request.GET.city }}">
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <div class="single_field">
                                        <input type="text" name="category" placeholder="{% trans 'Категория' %}" value="{{ request.GET.category }}">
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <div class="single_field">
                                        <input type="text" name="year" placeholder="{% trans 'Год' %}" value="{{ request.GET.year }}">
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <div class="single_field">
                                        <select name="ordering" class="wide">
                                            <option value="">{% trans "Сортировка" %}</option>
                                            <option value="start_at" {% if request.GET.ordering == 'start_at' %}selected{% endif %}>{% trans "По дате" %}</option>
                                            <option value="-start_at" {% if request.GET.ordering == '-start_at' %}selected{% endif %}>{% trans "По дате (новые)" %}</option>
                                            <option value="price_from" {% if request.GET.ordering == 'price_from' %}selected{% endif %}>{% trans "По цене" %}</option>
                                            <option value="-price_from" {% if request.GET.ordering == '-price_from' %}selected{% endif %}>{% trans "По цене (дороже)" %}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <div class="submit_btn">
                                        <button class="boxed-btn3 w-100" type="submit">{% trans "Применить" %}</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-lg-9">
                <div class="d-flex align-items-center justify-content-between flex-wrap mb-3">
                    <h3 class="mb-2">{% trans "Ваши события" %}</h3>
                    <a class="boxed-btn3" href="{% url 'events:create' %}">{% trans "Создать событие" %}</a>
                </div>
                {% if not has_access %}
                    <div class="notice-block">{% trans "Раздел доступен организаторам." %}</div>
                {% endif %}
                <div class="job_lists" data-filter-list>
                    <div class="row">
                        {% for event in page_obj.object_list %}
                            <div class="col-lg-12 col-md-12">
                                {% include 'partials/event_card.html' with show_status=True %}
                            </div>
                        {% empty %}
                            <div class="col-lg-12">
                                <div class="notice-block">{% trans "События не найдены." %}</div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
                {% include 'partials/pagination.html' %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
